 <!DOCTYPE html>
 <html lang="en">

 <head>
     <link rel="shortcut icon" href="img/favicon.ico">
     <meta charset="utf-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Login to MGCOne Inc.</title>
     <!--STYLESHEET-->
     <link rel="icon" href="/img/mgc_external_site/favicon.png">
     <link href="/fonts/font.css" rel="stylesheet">
     <link href="/plugins/pace/pace.min.css" rel="stylesheet">
     <link rel="stylesheet" type="text/css" href="/plugins/font-awesome/css/font-awesome.min.css" />
     <!--BOOTSTRAP STYLESHEET-->
     <link href="/css/responsive/bootstrap.min.css" rel="stylesheet">
     <!--MGC STYLESHEET-->
     <link href="/css/responsive/mgc-dashboard.css" rel="stylesheet">
     <link href="/css/responsive/mgc-admin.min.css" rel="stylesheet">
     <link href="/css/responsive/mgc.css" rel="stylesheet">
     <link href="/css/responsive/password.css" rel="stylesheet">
     <!--COMMON JS SCRIPTS-->
     <script src="/plugins/pace/pace.min.js"></script>
     <script src="/js/jquery-2.2.4.min.js"></script>
     <script src="/js/bootstrap.min.js"></script>
     <link rel="stylesheet" href="/plugins/mgc-alert/sweetalert.css">
     <script src="/plugins/mgc-alert/sweetalert.min.js"></script>
     <script type="text/javascript" src="/js/ajax.js"></script>
     <script language="javascript">
         $(document).ready(function () {});

         function showFacility(sort_type) {
             //document.getElementById('submit_button_div').innerHTML = '<span style="font-size:9px; ">Processing please wait...</span>';


             if (document.getElementById('HomesUserName').value == "" || document.getElementById('HomesUserName').value
                 .search(/\S/) == -1) {
                 swal("Please enter your Username.");
                 document.getElementById('HomesUserName').focus();
                 return false;
             }

             if (document.getElementById('HomesPassword').value == "" || document.getElementById('HomesPassword').value
                 .search(/\S/) == -1) {
                 swal("Please enter your Password.");
                 document.getElementById('HomesPassword').focus();
                 return false;
             }
             if (document.getElementById('HomesConfirmPassword').value == "" || document.getElementById(
                     'HomesConfirmPassword').value.search(/\S/) == -1) {
                 swal("Please enter your new password again.");
                 document.getElementById('HomesConfirmPassword').focus();
                 return false;
             }
             if (document.getElementById('HomesPassword').value != document.getElementById('HomesConfirmPassword')
                 .value) {
                 swal("Oops", "New Password and Confirm Password must be same", "error")
                 document.getElementById('HomesConfirmPassword').focus();
                 return false;
             }

             var strusr_name = document.getElementById('HomesPassword').value;
             if (strusr_name.length < 8) {
                 swal("Password should be atleast 8 character long.");
                 return false;
             }

             if (/^[a-zA-Z0-9-!@#$&()_]*$/.test(strusr_name) == false) {
                 //error message
                 swal("Allowed Password characters are a-z, A-Z, 0-9, -!@#$&()_ and no spaces");
                 return false;
             }

             /*	else{
             	var txt = document.getElementById('HomesPassword').value;
             	var ValidChars = "-!@#$&()_";  
             	var alphabet_count = 0;  
             	var Char; 
             	for (i = 0; i < txt.length; i++){
             		Char = txt.charAt(i); 
             		if (ValidChars.indexOf(Char) == -1){  
             		}else{
             			alphabet_count++;
             		}
             	}
             if(alphabet_count<1){
             		swal("There should be atleast one special character between - ! @ # $ & ( ) _ in your password");
             		return false;
             	} 
             }*/

             var txt = document.getElementById('HomesPassword').value;
             if (numb = txt.match(/\d/g)) {} else {
                 swal("There should be atleast one number in your password");
                 return false;
             }

             numeric_found = parseInt(numb.length);
             if (numeric_found < 1) {
                 swal("There should be atleast one number in your password");
                 return false;
             }

             var ValidChars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
             var alphabet_count = 0;
             var Char;
             for (i = 0; i < txt.length; i++) {
                 Char = txt.charAt(i);
                 if (ValidChars.indexOf(Char) == -1) {} else {
                     alphabet_count++;
                 }
             }
             if (alphabet_count < 1) {
                 swal("There should be atleast one alphabet in your password");
                 return false;
             }
             var usrname = '';
             //swal(password);
             if (document.getElementById('HomesUserName').value == document.getElementById('HomesPassword').value) {
                 swal("User name and password cannot be same.");
                 return false;
             }

             document.getElementById('resetpassword').submit();

             /*var url="/homes/update_pass/"+Math.random()+"/"+document.getElementById('HomesUserName').value+"/"+document.getElementById('HomesPassword').value+"/"+document.getElementById('HomesUserId').value+"/"+document.getElementById('HomesPrimarySecondary').value; 
	http.onreadystatechange=stateChanged3;
	http.open("GET",url,true);
	http.send(null);*/

         }

         function stateChanged3() {
             if (http.readyState == 4 || http.readyState == "completed") {
                 var resp = http.responseText;
                 //swal(resp);
                 if (resp == -1) {
                     swal("Username and password already in use.Please use different one.");
                 } else {
                     swal("Thank You !", "Your Username and password updated successfully.", "success");
                     //document.getElementById('submit_button_div').innerHTML = '<img onclick="showFacility();" alt="MGC" src="/img/submit-on.png">';
                     document.location.href = resp;
                 }

                 //document.getElementById('reservations_status').innerHTML=resp;
             }
         }
     </script>
 </head>

 <body>
     <div class="animated-bg">
         <div style="position: relative; background: -webkit-linear-gradient(45deg, rgba(125, 203, 212, 0.5) 0%, rgba(150, 205, 211, 0.3) 50%, rgba(228, 245, 252, 0) 100%); overflow: hidden;"
             id="container" class="cls-container">
             <div id="bg-overlay"></div>
             <!-- LOGIN FORM -->
             <!--===================================================-->
             <div class="cls-content">
                 <div class="cls-content-sm panel">
                     <form action="/homes/resetpass" name="resetpassword" id="resetpassword"
                         enctype="multipart/form-data" method="post" accept-charset="utf-8">
                         <div class="panel-body">
                             <div class="text-center">
                                 <img class="max-logo" src="/img/mgc_external_site/logo.png" />
                                 <h3 class="mar-no">Waters Edge</h3>
                                 <p class="text-muted mar-btm">Update your password</p>
                             </div>
                             <form action="/homes/resetpass" name="InvoiceBatch" id="HomesResetpassForm"
                                 enctype="multipart/form-data" method="post" accept-charset="utf-8">
                                 <div style="display:none;"><input type="hidden" name="_method" value="POST" /></div>
                                 <input type="hidden" name="data[Homes][user_id]" value="36718"
                                     id="HomesUserId" /><input type="hidden" name="data[Homes][primary_secondary]"
                                     value="S" id="HomesPrimarySecondary" /><input type="hidden"
                                     name="data[Homes][requset_uri]"
                                     value="/homes/resetpass/77169f705f67860a3b9b93acf782a6a6/5dbc98dcc983a70728bd082d1a47546e/ecd673e4f45592fe075c6f5cee5cc145"
                                     id="HomesRequsetUri" />
                                 <div class="form-group text-left">
                                     <label class="control-label">Username</label>
                                     <input name="data[Homes][user_name]" type="text" class="form-control"
                                         readonly="readonly" value="tonykoz5909@gmail.com" id="HomesUserName" /> </div>
                                 <div class="form-group has-feedback text-left">
                                     <label class="control-label">Password</label>
                                     <input type="password" name="data[Homes][password]" class="form-control"
                                         placeholder="Enter your Password" autofocus="1" id="HomesPassword" /> <i
                                         title="Show / Hide Password" toggle="#HomesPassword"
                                         class="glyphicon glyphicon-eye-close form-control-feedback toggle-password"></i>
                                 </div>
                                 <div id="message"> <span id="letter" class="invalid">An alphabet (e.g. abcde)</span>
                                     <span id="number" class="invalid">A number (e.g. 123456)</span> <span id="length"
                                         class="invalid">Minimum 8 characters</span> <span id="supchars"
                                         class="valid">Only supported special characters (- ! @ # $ & ( ) _)</span>
                                     <span id="nospace" class="valid">No space in your password</span></div>
                                 <div class="form-group has-feedback text-left">
                                     <label class="control-label">Confirm Password</label>
                                     <input type="password" name="data[Homes][confirm_password]" class="form-control"
                                         placeholder="Enter your Password" id="HomesConfirmPassword" /> <i
                                         title="Show / Hide Password" toggle="#HomesConfirmPassword"
                                         class="glyphicon glyphicon-eye-close form-control-feedback toggle-password"></i>
                                 </div>
                                 <a href="javascript:void(0);" class="btn btn-primary text-light btn-lg btn-block"
                                     onClick="showFacility();">Update</a>
                                 <!--<div class="signin"> your community website url    </div>-->
                                 <div class="text-sm mar-eig text-main"> by signing up, you agree to our <a
                                         target="_blank" href="/homes/terms_condition" class="f-link"> terms &amp;
                                         conditions</a> and <a target="_blank" href="/homes/privacy_policy"
                                         class="f-link"> privacy policy</a> </div>
                         </div>
                     </form>
                 </div>
             </div>
         </div>
         <!--===================================================-->
     </div>
     <!--===================================================-->
     <!-- END OF CONTAINER -->
 </body>
 <script>
     var myInput = document.getElementById("HomesPassword");
     var letter = document.getElementById("letter");
     var number = document.getElementById("number");
     var length = document.getElementById("length");
     var supchars = document.getElementById("supchars");
     var nospace = document.getElementById("nospace");



     // When the user starts to type something inside the password field
     myInput.onkeyup = function () {
         // Validate lowercase letters
         var lowerCaseLetters = /[a-zA-Z]/g;
         if (myInput.value.match(lowerCaseLetters)) {
             letter.classList.remove("invalid");
             letter.classList.add("valid");
         } else {
             letter.classList.remove("valid");
             letter.classList.add("invalid");
         }

         // Validate numbers
         var numbers = /[0-9]/g;
         if (myInput.value.match(numbers)) {
             number.classList.remove("invalid");
             number.classList.add("valid");
         } else {
             number.classList.remove("valid");
             number.classList.add("invalid");
         }

         // Validate length
         if (myInput.value.length >= 8) {
             length.classList.remove("invalid");
             length.classList.add("valid");
         } else {
             length.classList.remove("valid");
             length.classList.add("invalid");
         }

         // Validate special characters
         var splchars = /[%*+,.:<=>?"'\^`{|}~]/g;
         if (myInput.value.match(splchars)) {
             supchars.classList.remove("valid");
             supchars.classList.add("invalid");
         } else {
             supchars.classList.remove("invalid");
             supchars.classList.add("valid");
         }
         // Validate special characters
         var space = /[ ]/g;
         if (myInput.value.match(space)) {
             nospace.classList.remove("valid");
             nospace.classList.add("invalid");
         } else {
             nospace.classList.remove("invalid");
             nospace.classList.add("valid");
         }

     }
 </script>
 <script>
     $(".toggle-password").click(function () {
         $(this).toggleClass('glyphicon-eye-close').toggleClass('glyphicon-eye-open');
         var input = $($(this).attr("toggle"));
         if (input.attr("type") == "password") {
             input.attr("type", "text");
         } else {
             input.attr("type", "password");
         }
     });
 </script>
 <script>
     $(document).ready(function () {
         $("#message").css("display", "block");
     });
 </script>

 </html>
